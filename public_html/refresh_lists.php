<?php	require_once("common.php");		$json = json_decode(get("json"), true);	//var_dump($json);	function gimme($name)	{		global $json;		if (!isset($json[$name]))			return "";		return trim($json[$name]);	}		$result = array();		$userid = get_userid_by_session(gimme("session"));		if ($userid === false)	{		$result["success"] = false;		$result["error"] = "Sorry, Missing Session. Please Login! :)";	} else {		$result["success"] = true;				$time = time();		$sql = "			SELECT id, name, server_ids			FROM player_lists			WHERE user_id = $userid		";		$query = mysql_query($sql);						if (mysql_num_rows($query) == 0)		{			$result["success"] = false;			$result["error"] = "No Lists available.";		} else {					$lists = array();			while ($row = mysql_fetch_assoc($query))			{				// dont send the server_ids to client, they just need the count() of it = less traffic and faster				$server = array();				$server["id"] = $row["id"];				$server["name"] = $row["name"];											/*							tmp = list.server_ids.split(",").length;							num_servers = 0;							for (var ii=0; ii<tmp.length; ii++)								if (tmp[ii].strlen())									num_servers++;							*/											$tmp = explode(",", $row["server_ids"]);				$num_servers = 0;				for ($i=0; $i<count($tmp); $i++)					if (strlen($tmp[$i]) && is_numeric($tmp[$i]))						$num_servers++;				$server["num_servers"] = $num_servers;				$lists[] = $server;			}					$result["success"] = true;			$result["lists"] = $lists;		}	}		echo json_encode($result);?>